<?xml version="1.0" encoding="UTF-8" ?>
<container xmlns="http://symfony.com/schema/dic/services"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://symfony.com/schema/dic/services
        http://symfony.com/schema/dic/services/services-1.0.xsd">

    <services>
        <service
            class="Crunz\Console\Command\ScheduleRunCommand"
            id="Crunz\Console\Command\ScheduleRunCommand"
            public="true"
        >
            <argument type="service" id="Crunz\Task\Collection"/>
            <argument type="service" id="Crunz\Configuration\Configuration"/>
            <argument type="service" id="Crunz\EventRunner"/>
            <argument type="service" id="Crunz\Task\Timezone"/>
            <argument type="service" id="Crunz\Schedule\ScheduleFactory"/>
        </service>

        <service
            class="Crunz\Console\Command\ClosureRunCommand"
            id="Crunz\Console\Command\ClosureRunCommand"
            public="true"
        />

        <service
            class="Crunz\Console\Command\ConfigGeneratorCommand"
            id="Crunz\Console\Command\ConfigGeneratorCommand"
            public="true"
        >
            <argument type="service" id="Crunz\Timezone\ProviderInterface"/>
            <argument type="service" id="Symfony\Component\Filesystem\Filesystem"/>
            <argument type="service" id="Crunz\Filesystem\FilesystemInterface"/>
        </service>

        <service
            class="Crunz\Console\Command\ScheduleListCommand"
            id="Crunz\Console\Command\ScheduleListCommand"
            public="true"
        >
            <argument type="service" id="Crunz\Configuration\Configuration"/>
            <argument type="service" id="Crunz\Task\Collection"/>
        </service>

        <service
            class="Crunz\Console\Command\TaskGeneratorCommand"
            id="Crunz\Console\Command\TaskGeneratorCommand"
            public="true"
        >
            <argument type="service" id="Crunz\Configuration\Configuration"/>
        </service>

        <service
            class="Symfony\Component\Finder\Finder"
            id="Symfony\Component\Finder\Finder"
            public="false"
        />

        <service
            class="Crunz\Configuration\Definition"
            id="Crunz\Configuration\Definition"
            public="false"
        />

        <service
            class="Symfony\Component\Yaml\Yaml"
            id="Symfony\Component\Yaml\Yaml"
            public="false"
        />

        <service
            class="Symfony\Component\Config\Definition\Processor"
            id="Symfony\Component\Config\Definition\Processor"
            public="false"
        />

        <service
            class="Crunz\Task\Collection"
            id="Crunz\Task\Collection"
            public="false"
        >
            <argument type="service" id="Crunz\Configuration\Configuration"/>
            <argument type="service" id="Symfony\Component\Finder\Finder"/>
        </service>

        <service
            class="Crunz\Configuration\FileParser"
            id="Crunz\Configuration\FileParser"
            public="false"
        >
            <argument type="service" id="Symfony\Component\Yaml\Yaml" />
        </service>

        <service
            class="Symfony\Component\PropertyAccess\PropertyAccessor"
            id="Symfony\Component\PropertyAccess\PropertyAccessorInterface"
        >
            <argument type="string">false</argument>
            <argument type="string">true</argument>
        </service>

        <service
            class="Crunz\Configuration\Configuration"
            id="Crunz\Configuration\Configuration"
            public="false"
        >
            <argument type="service" id="Symfony\Component\PropertyAccess\PropertyAccessorInterface"/>
            <argument type="service" id="Crunz\Configuration\ConfigurationParserInterface"/>
            <argument type="service" id="Crunz\Filesystem\FilesystemInterface"/>
        </service>

        <service
            class="Crunz\Invoker"
            id="Crunz\Invoker"
            public="false"
        />

        <service
            class="Crunz\Mailer"
            id="Crunz\Mailer"
            public="false"
        >
            <argument type="service" id="Crunz\Configuration\Configuration"/>
        </service>

        <service
            class="Crunz\Logger\LoggerFactory"
            id="Crunz\Logger\LoggerFactory"
        >
            <argument type="service" id="Crunz\Configuration\Configuration"/>
        </service>

        <service
            class="Crunz\Timezone\Provider"
            id="Crunz\Timezone\ProviderInterface"
            public="false"
        />

        <service
            class="Crunz\EventRunner"
            id="Crunz\EventRunner"
            public="false"
        >
            <argument type="service" id="Crunz\Invoker"/>
            <argument type="service" id="Crunz\Configuration\Configuration"/>
            <argument type="service" id="Crunz\Mailer"/>
            <argument type="service" id="Crunz\Logger\LoggerFactory"/>
            <argument type="service" id="Crunz\HttpClient\HttpClientLoggerDecorator"/>
            <argument type="service" id="Crunz\Logger\ConsoleLoggerInterface"/>
        </service>

        <service
            class="Symfony\Component\Filesystem\Filesystem"
            id="Symfony\Component\Filesystem\Filesystem"
        />

        <service
            class="Crunz\Schedule\ScheduleFactory"
            id="Crunz\Schedule\ScheduleFactory"
        />

        <service
            class="Crunz\Task\Timezone"
            id="Crunz\Task\Timezone"
            public="false"
        >
            <argument type="service" id="Crunz\Configuration\Configuration"/>
            <argument type="service" id="Crunz\Timezone\ProviderInterface"/>
        </service>

        <service
            id="Symfony\Component\Console\Output\OutputInterface"
            class="Symfony\Component\Console\Output\ConsoleOutput"
            public="true"
        >
            <factory
                service="Crunz\Output\OutputFactory"
                method="createOutput"
            />
        </service>

        <service
            class="Crunz\Output\OutputFactory"
            id="Crunz\Output\OutputFactory"
            public="false"
        >
            <argument type="service" id="Symfony\Component\Console\Input\InputInterface" />
        </service>

        <service
            class="Symfony\Component\Console\Input\ArgvInput"
            id="Symfony\Component\Console\Input\InputInterface"
            public="true"
        />

        <service
            class="Symfony\Component\Console\Style\SymfonyStyle"
            id="Symfony\Component\Console\Style\SymfonyStyle"
            public="true"
        >
            <argument type="service" id="Symfony\Component\Console\Input\InputInterface"/>
            <argument type="service" id="Symfony\Component\Console\Output\OutputInterface"/>
        </service>

        <service
            class="Crunz\Logger\ConsoleLogger"
            id="Crunz\Logger\ConsoleLoggerInterface"
            public="false"
        >
            <argument type="service" id="Symfony\Component\Console\Style\SymfonyStyle" />
        </service>

        <service
            class="Crunz\HttpClient\StreamHttpClient"
            id="Crunz\HttpClient\StreamHttpClient"
            public="false"
        />

        <service
            class="Crunz\HttpClient\FallbackHttpClient"
            id="Crunz\HttpClient\FallbackHttpClient"
            public="false"
        >
            <argument id="Crunz\HttpClient\StreamHttpClient" type="service"/>
            <argument id="Crunz\HttpClient\CurlHttpClient" type="service"/>
            <argument type="service" id="Crunz\Logger\ConsoleLoggerInterface"/>
        </service>

        <service
            class="Crunz\HttpClient\CurlHttpClient"
            id="Crunz\HttpClient\CurlHttpClient"
            public="false"
        />

        <service
            alias="Crunz\HttpClient\FallbackHttpClient"
            id="Crunz\HttpClient\HttpClientInterface"
            public="false"
        />

        <service
            class="Crunz\HttpClient\HttpClientLoggerDecorator"
            id="Crunz\HttpClient\HttpClientLoggerDecorator"
        >
            <argument type="service" id="Crunz\HttpClient\HttpClientInterface"/>
            <argument type="service" id="Crunz\Logger\ConsoleLoggerInterface"/>
        </service>

        <service
            class="Crunz\Filesystem\Filesystem"
            id="Crunz\Filesystem\FilesystemInterface"
            public="false"
        />

        <service
            class="Crunz\Configuration\ConfigurationParser"
            id="Crunz\Configuration\ConfigurationParserInterface"
            public="false"
        >
            <argument type="service" id="Crunz\Configuration\Definition"/>
            <argument type="service" id="Symfony\Component\Config\Definition\Processor"/>
            <argument type="service" id="Crunz\Configuration\FileParser"/>
            <argument type="service" id="Crunz\Logger\ConsoleLoggerInterface"/>
            <argument type="service" id="Crunz\Filesystem\FilesystemInterface"/>
        </service>
    </services>
</container>
